<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>VTUL</title>
</head>

<body>
    <h1 id="engin">VTUL</h1>
    <label><input type="checkbox" value="obj_1"><span>1</span></label><br>
    <label><input type="checkbox" value="obj_2"><span>2</span></label><br>
    <label><input type="checkbox" value="obj_3"><span>3</span></label><br>
    <label><input type="checkbox" value="obj_4"><span>4</span></label><br>
    <label><input type="checkbox" value="obj_5"><span>5</span></label><br>
    <label><input type="checkbox" value="obj_6"><span>6</span></label><br>
    <label><input type="checkbox" value="obj_7"><span>7</span></label><br>
    <label><input type="checkbox" value="obj_8"><span>8</span></label><br>
    <label><input type="checkbox" value="obj_9"><span>9</span></label><br>
    <label><input type="checkbox" value="obj_10"><span>10</span></label><br>
    <button id="bobBtn">Créer le compte rendu</button> <br>
    <button id="gotoIndixBtn">Aller à la page d'accueil</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        document.getElementById('bobBtn').addEventListener('click', function () {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checked = [];
            const unchecked = [];
            checkboxes.forEach(cb => {
                const label = cb.parentElement;
                const text = label.querySelector('span').textContent;
                if (cb.checked) {
                    checked.push(text);
                } else {
                    unchecked.push(text);
                }
            });

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const titre = document.getElementById("engin").textContent;
            var ligne_n = 50
            doc.setFontSize(22);
            doc.text("Compte rendue matérielle " + titre, 10, 20);
            doc.text("Liste du matérielle présent :", 10, 40);
            for (let i = 0; i < checked.length; i++) {
                doc.text("    - " + checked[i], 10, ligne_n);
                ligne_n += 10;
            }
            ligne_n += 10;
            doc.text("Liste du matérielle absent :", 10, ligne_n);
            ligne_n += 10;
            for (let i = 0; i < unchecked.length; i++) {
                doc.text("    - " + unchecked[i], 10, ligne_n);
                ligne_n += 10;
            }

            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            const dateStr = `${day}/${month}/${year}`;
            doc.text("fait le " + dateStr, 10, ligne_n + 10);
            doc.save('compte rendus du ' + titre + " fait le " + dateStr + " .pdf");
        });

        document.getElementById('gotoIndixBtn').addEventListener('click', function () {
            window.location.href = "/index.html";
        });
    </script>
</body>

</html>