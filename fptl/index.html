<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>FPTL</title>
</head>

<body>
    <h1 id="engin">FPTL</h1>
    <label><input type="checkbox" value="obj_1"><span>2 dévidoire tournant</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>7 cone de signalisation</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 lance feut de cheminer</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 LDT</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 echelle deux plan</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 echelle a crochet</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>4 dispositife de franchisement de tuyeau</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>4 ARI</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>4 bidon d'émulseur</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 scie a boit</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 floteur + 1 crépine</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 surpentalon de tronceneuse</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 bidon escence</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 bouteille oxygen</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 lance crapeaux</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>8 tuyeau 70</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>5 aspirot</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>2 calle</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 code d'alimenation</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 lance queu de paon</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>caise racord et acesoire idrolique</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 clée de poteau</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>2 tuyeau 110</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>2 caisse materielle feut de cheminer</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>2 bouteille ARI de reserve</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 lot LSPCC</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>2 LDV 45</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>2 triengle de signalisation</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 dispositife mouillant</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 LDV 70</span></label><br>
    <label><input type="checkbox" value="obj_1"><span>1 groupe éléctrogene</span></label><br>
    <label><input type="checkbox" value="obj_2"><span>10 tuyeau 45</span></label><br>
    <label><input type="checkbox" value="obj_3"><span>1 tuyeau 22</span></label><br>
    <label><input type="checkbox" value="obj_4"><span>2 projecteur avec trepier</span></label><br>
    <label><input type="checkbox" value="obj_5"><span>3 ralonge electrique avec prise marshall</span></label><br>
    <label><input type="checkbox" value="obj_6"><span>2 ling guides</span></label><br>
    <label><input type="checkbox" value="obj_7"><span>1 ballet brosse</span></label><br>
    <label><input type="checkbox" value="obj_8"><span>1 caisse d'écontamination incendis</span></label><br>
    <label><input type="checkbox" value="obj_9"><span>2</span></label><br>
    <label><input type="checkbox" value="obj_10"><span>6 lampe jaune</span></label><br>
    <label><input type="checkbox" value="obj_11"><span>4 masque ART</span></label><br>
    <label><input type="checkbox" value="obj_12"><span>6 sangles</span></label><br>
    <label><input type="checkbox" value="obj_13"><span>2 extencteur</span></label><br>
    <label><input type="checkbox" value="obj_14"><span>1 comande</span></label><br>
    <label><input type="checkbox" value="obj_15"><span>6 guillet haut visibilitée</span></label><br>
    <label><input type="checkbox" value="obj_16"><span>1 grande teinaille</span></label><br>
    <label><input type="checkbox" value="obj_17"><span>1 caisse a outille</span></label><br>
    <label><input type="checkbox" value="obj_18"><span>1 Hooligan</span></label><br>
    <label><input type="checkbox" value="obj_19"><span>1 ralonge avec embout alkume cygare</span></label><br>
    <label><input type="checkbox" value="obj_20"><span>2 rubalise</span></label><br>
    <label><input type="checkbox" value="obj_21"><span>1 carnet de bord</span></label><br>
    <label><input type="checkbox" value="obj_22"><span>1 tetecteur multigaze</span></label><br>
    <label><input type="checkbox" value="obj_23"><span>1 sonde multigaze</span></label><br>
    <label><input type="checkbox" value="obj_24"><span>2 grose lampe orange</span></label><br>
    <label><input type="checkbox" value="obj_25"><span>1 plaque de controle entrée/sotri</span></label><br>
    <label><input type="checkbox" value="obj_26"><span>1 clée cofret electrique</span></label><br>
    <label><input type="checkbox" value="obj_27"><span>doc operationelle</span></label><br>
    <label><input type="checkbox" value="obj_28"><span>1 hachette</span></label><br>
    <label><input type="checkbox" value="obj_29"><span>1 pieds de biche</span></label><br>
    <label><input type="checkbox" value="obj_30"><span>1 capteur de tempeature laser</span></label><br>
    <label><input type="checkbox" value="obj_31"><span>1 lampe portable BOSCH</span></label><br>
    <label><input type="checkbox" value="obj_32"><span>2 boite a gant</span></label><br>
    <label><input type="checkbox" value="obj_33"><span>1 masse</span></label><br>
    <label><input type="checkbox" value="obj_34"><span>3 pelle</span></label><br>
    <label><input type="checkbox" value="obj_35"><span>2 balette</span></label><br>
    <label><input type="checkbox" value="obj_36"><span>1 fourche</span></label><br>
    <label><input type="checkbox" value="obj_37"><span>1 piquet</span></label><br>
    <label><input type="checkbox" value="obj_38"><span>1 base a feut</span></label><br>
    <label><input type="checkbox" value="obj_39"><span>1 crochet</span></label><br>
    <button id="bobBtn">Créer le compte rendu</button> <br>
    <button id="gotoIndixBtn">Aller à la page d'accueil</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        document.getElementById('bobBtn').addEventListener('click', function () {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checked = [];
            const unchecked = [];
            checkboxes.forEach(cb => {
                const label = cb.parentElement;
                const text = label.querySelector('span').textContent;
                if (cb.checked) {
                    checked.push(text);
                } else {
                    unchecked.push(text);
                }
            });

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const titre = document.getElementById("engin").textContent;
            let ligne_n = 50;
            const marge_haut = 20;
            const marge_gauche = 10;
            const hauteur_ligne = 10;
            const hauteur_page = doc.internal.pageSize.getHeight();
            const marge_bas = 20;

            doc.setFontSize(22);
            doc.text("Compte rendue matérielle " + titre, marge_gauche, marge_haut);
            doc.setFontSize(16);
            ligne_n = marge_haut + 20;
            doc.text("Liste du matérielle présent :", marge_gauche, ligne_n);
            ligne_n += hauteur_ligne;

            // Fonction pour gérer le saut de page
            function checkPageSpace() {
                if (ligne_n + hauteur_ligne > hauteur_page - marge_bas) {
                    doc.addPage();
                    ligne_n = marge_haut;
                }
            }

            for (let i = 0; i < checked.length; i++) {
                checkPageSpace();
                doc.text("    - " + checked[i], marge_gauche, ligne_n);
                ligne_n += hauteur_ligne;
            }
            ligne_n += hauteur_ligne;
            checkPageSpace();
            doc.text("Liste du matériel absent ou incomplet :", marge_gauche, ligne_n);
            ligne_n += hauteur_ligne;

            for (let i = 0; i < unchecked.length; i++) {
                checkPageSpace();
                doc.text("    - " + unchecked[i], marge_gauche, ligne_n);
                ligne_n += hauteur_ligne;
            }

            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            const dateStr = `${day}/${month}/${year}`;
            checkPageSpace();
            doc.text("fait le " + dateStr, marge_gauche, ligne_n + hauteur_ligne);
            doc.save('compte rendus du ' + titre + " fait le " + dateStr + " .pdf");
        });

        document.getElementById('gotoIndixBtn').addEventListener('click', function () {
            window.location.href = "../index.html";
        });
    </script>
</body>

</html>